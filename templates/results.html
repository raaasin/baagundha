{% extends "layout.html" %}
{% block content %}
    <div id="loading">Loading...</div>
    <div id="result" style="display: none;">
        <h3>Result:</h3>
        <p>Rating: {{ response.rating }}⭐</p>
        <p>Reason: {{ response.reason }}</p>
        <p>Expiry: {{ response.expiry }}</p>

        <div id="actions">
            <button class="scan-button" onclick="window.location.href='/'">Retake</button>
            <button id="alternative" class="scan-button" onclick="window.location.href='/alternative'">Alternative</button>
        </div>
    </div>
    <script>
        var d = document.getElementsByTagName('p')[0].innerHTML;
        var y = d.substring(d.indexOf("Rating: ") + 8, d.indexOf("⭐"));
        console.log(y);
        if (y == 'N/A' || y == '5') {
            console.log('i tried');
            document.getElementById('alternative').style.display = 'none';
        }
        // Simulate loading time
        setTimeout(() => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('result').style.display = 'block';
        }, 599);
    </script>
{% endblock %}
