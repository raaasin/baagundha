{% extends "layout.html" %}
{% block content %}

    <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/sprinkle.js"></script>
    <meta id="rating-data" data-rating="{{response.rating}}">
    <div id="loading">Loading...</div>
    <div id="result" style="display: none;">
        <h3>Result:</h3>
        <p>Rating: {{ response.rating }}‚≠ê</p>
        <p>Reason: {{ response.reason }}</p>
        <p>Expiry: {{ response.expiry }}</p>

        <div id="actions">
            <button class="scan-button" onclick="window.location.href='/'">Retake</button>
            <button class="scan-button" onclick="window.location.href='/alternative'">Alternative</button>
        </div>
    </div>
    <script>
        var rating = $('#rating-data').data();
        // if response.expiry is 'N/A' or 5 then hide Alternative button
        console.log(rating);
        if (rating == "N/A" || rating == "5") {
            document.getElementById('actions').style.display = 'none';
        }
        // Simulate loading time
        setTimeout(() => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('result').style.display = 'block';
        }, 599);
    </script>
{% endblock %}
